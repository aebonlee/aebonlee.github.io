---
---

/*
 * This file controls what is imported from /_sass
 *
 * Note that the files are processed in the order they are imported, so they are partly
   sorted by the dependencies. Also, the first two lines of the file are required by Jekyll.
 */

@import
    "vendor/breakpoint/breakpoint",

    "themes",
    "theme/{{ site.site_theme | default: 'default' | append: '_light' }}",
    "theme/{{ site.site_theme | default: 'default' | append: '_dark' }}",

    "include/mixins",
    "vendor/susy/susy",

    "layout/reset",
    "layout/base",

    "include/utilities",
    "layout/tables",
    "layout/buttons",
    "layout/notices",
    "layout/masthead",
    "layout/navigation",
    "layout/footer",
    "syntax",

    "layout/forms",

    "layout/page",
    "layout/archive",
    "layout/sidebar",
    "layout/json_cv",

    "vendor/font-awesome/fontawesome",
    "vendor/font-awesome/solid",
    "vendor/font-awesome/brands"
;

/* Layout configuration variables */
$sidebar-width: 280px;
$container-max-width: 1280px;
$content-padding: 40px;
$content-max-width: calc(#{$container-max-width} - #{$sidebar-width} - 80px);

/* Enhanced background with wave animation */
html {
  height: 100%;
}

body {
  position: relative;
  background: #f5f5f5; /* Fallback color */
  min-height: 100%;
  margin: 0;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
}

/* Canvas background styling */
#wave-canvas {
  position: fixed !important;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  pointer-events: none;
}

/* Main content area with glassmorphism effect */
#main {
  position: relative;
  z-index: 1;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 15px;
  box-shadow: 
    0 20px 40px rgba(0, 0, 0, 0.1),
    0 0 60px rgba(255, 255, 255, 0.2) inset;
  margin: 2em auto;
  max-width: $container-max-width;
  display: flex;
  gap: 30px;
  padding: 30px;
  flex: 1 0 auto; /* Flex grow to fill available space */
}

/* Enhanced sidebar with glassmorphism */
.sidebar {
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(15px);
  border-radius: 15px;
  padding: 1.5em !important;
  box-shadow: 
    0 10px 30px rgba(0, 0, 0, 0.1),
    0 0 40px rgba(255, 255, 255, 0.15) inset;
  border: 1px solid rgba(255, 255, 255, 0.3);
  width: $sidebar-width !important;
  min-width: $sidebar-width !important;
  max-width: $sidebar-width !important;
  flex-shrink: 0;
}

/* Page content area enhancement */
.page {
  background: rgba(255, 255, 255, 0.98);
  border-radius: 10px;
  padding: $content-padding !important;
  margin: 0;
  flex: 1 1 auto; /* Allow page to grow and shrink */
  max-width: $content-max-width;
  min-height: calc(100vh - 250px); /* Ensure minimum height */
}

/* Page title spacing enhancement */
.page__title {
  margin-top: 0 !important;
  padding-top: 80px !important;
  margin-bottom: 2em;
  font-size: 2.5em;
  font-weight: 700;
  color: #333;
  position: relative;
  
  &::after {
    content: "";
    display: block;
    width: 80px;
    height: 4px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    margin-top: 20px;
    border-radius: 2px;
  }
}

/* Archive page title styling */
.archive__title {
  margin-top: 0 !important;
  padding-top: 80px !important;
  margin-bottom: 2em;
  font-size: 2.2em;
  font-weight: 700;
}

/* Content typography and spacing */
.page__content {
  max-width: 100%;
  
  p {
    margin-bottom: 1.8em;
    line-height: 1.8;
    font-size: 1.05rem;
  }
  
  h1 {
    margin-top: 0;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    border-bottom: 2px solid rgba(103, 126, 234, 0.2);
  }
  
  h2 {
    margin-top: 2.5em;
    margin-bottom: 1em;
    padding-bottom: 0.3em;
    border-bottom: 1px solid rgba(103, 126, 234, 0.15);
  }
  
  h3 {
    margin-top: 2em;
    margin-bottom: 0.8em;
  }
  
  ul, ol {
    margin-left: 2em;
    margin-bottom: 2em;
    
    li {
      margin-bottom: 0.8em;
      line-height: 1.7;
    }
  }
  
  blockquote {
    margin: 2em 0;
    padding: 1.5em;
    background: rgba(103, 126, 234, 0.05);
    border-left: 4px solid rgba(103, 126, 234, 0.3);
    border-radius: 5px;
  }
}

/* Archive items with hover effect */
.archive__item {
  background: rgba(255, 255, 255, 0.7);
  padding: 1.5em;
  border-radius: 10px;
  margin-bottom: 1.5em;
  transition: all 0.3s ease;
  border: 1px solid rgba(255, 255, 255, 0.5);
}

.archive__item:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
  background: rgba(255, 255, 255, 0.95);
}

/* Masthead enhancement */
.masthead {
  background: rgba(255, 255, 255, 0.98);
  backdrop-filter: blur(20px);
  box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(255, 255, 255, 0.3);
}

/* Footer styling - Sticky footer */
.page__footer {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  margin: 0 !important;
  margin-top: auto !important; /* Push footer to bottom */
  border-top: 1px solid rgba(255, 255, 255, 0.3);
  height: 150px;
  flex-shrink: 0; /* Prevent footer from shrinking */
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  
  footer {
    margin: 0 auto;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
  }
  
  .page__footer-copyright {
    margin-bottom: 10px;
  }
  
  .page__footer-follow {
    margin: 0;
  }
}

/* Links with gradient effect */
a {
  position: relative;
  transition: color 0.3s ease;
}

a:hover {
  color: #764ba2;
}

/* Buttons with gradient background */
.btn {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white !important;
  border: none;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(118, 75, 162, 0.4);
}

/* Author avatar enhancement */
.author__avatar img {
  border: 3px solid rgba(255, 255, 255, 0.9);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

/* Wave animation support styles */
.wave-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: -1;
}

/* Layout responsiveness and structure */
@media screen and (min-width: 1024px) {
  #main {
    display: flex;
    align-items: flex-start;
    justify-content: center;
  }
  
  .sidebar {
    position: sticky;
    top: 100px;
    height: calc(100vh - 120px);
    overflow-y: auto;
    padding: 25px !important;
    margin: 0;
    width: $sidebar-width !important;
  }
  
  .page {
    margin: 0;
    padding: $content-padding !important;
    width: 100%;
    max-width: $content-max-width;
  }
  
  .author__content {
    margin-bottom: 20px;
  }
  
  .author__bio {
    margin-bottom: 15px !important;
    line-height: 1.4;
  }
  
  .author__urls {
    margin-top: 15px;
  }
  
  .author__urls li {
    margin-bottom: 8px;
  }
  
  .author__urls a {
    padding: 8px 0;
    line-height: 1.2;
  }
}

/* Improve spacing between sidebar elements */
.author__name {
  margin-bottom: 8px !important;
}

.author__pronouns {
  margin-bottom: 8px !important;
}

/* Page content spacing improvements */
.page__content {
  h1, h2, h3, h4, h5, h6 {
    margin-top: 1.5em;
    margin-bottom: 0.8em;
  }
  
  h1 {
    margin-top: 0.5em;
  }
  
  h2 {
    margin-top: 2em;
    padding-bottom: 0.5em;
  }
  
  p {
    margin-bottom: 1.2em;
    line-height: 1.6;
  }
  
  ul, ol {
    margin-bottom: 1.5em;
    
    li {
      margin-bottom: 0.5em;
      line-height: 1.5;
    }
    
    ul, ol {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }
  }
  
  blockquote {
    margin: 1.5em 0;
    padding-left: 1.5em;
  }
}

/* Archive page (Publications, CV, etc.) spacing */
.archive {
  .archive__item {
    margin-bottom: 2em;
    
    .archive__item-title {
      margin-bottom: 0.5em;
    }
    
    .archive__item-excerpt {
      margin-bottom: 0;
    }
  }
}

/* CV page specific improvements */
.page__content {
  h6 + ul, h5 + ul, h4 + ul, h3 + ul, h2 + ul {
    margin-top: 0.5em;
  }
  
  ul ul {
    margin-top: 0.3em;
    margin-bottom: 0.8em;
  }
  
  strong {
    color: var(--global-text-color);
  }
}

/* Mobile and tablet responsive layout */
@media screen and (max-width: 1023px) {
  #main {
    flex-direction: column;
    padding: 20px;
    max-width: 100%;
  }
  
/* Better mobile responsive behavior */
@media screen and (max-width: 1023px) {
  .sidebar {
    position: relative;
    margin: 0 0 2em 0;
    width: 100% !important;
    max-width: 100% !important;
  }
  
  .page {
    margin: 0;
    width: 100%;
    max-width: 100%;
    padding: 25px !important;
  }
  
  }
  
  .page__content {
    h2 {
      margin-top: 1.5em;
    }
  }
}

/* Improve readability */
@media screen and (min-width: 1024px) {
  .page__content {
    font-size: 1.05em;
    line-height: 1.65;
  }
}